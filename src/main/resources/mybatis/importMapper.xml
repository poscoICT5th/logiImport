<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Pack.mapper.ImportMapper">    
    <select id="selectAll" resultType="LogiImportVo">
        SELECT * 
        from Import
    </select>
    
    <select id="selectByInstNo" parameterType="String" resultType="LogiImportVo">
        SELECT * 
        from Import
        where instruction_no=#{instructionNo};
    </select>
    
    <select id="selectSome" parameterType="LogiImportSearchDTO" resultType="LogiImportVo">
    	select *
    	from Import
    	where
    	<if test="status != null">status=#{status} and</if>
    	<if test="location != null">location=#{location} and</if>
    	<if test="product_family != null">product_family=#{product_family} and</if>
    	<if test="lot_no != null">lot_no like CONCAT('%',#{lot_no},'%') and</if>
    	<if test="item_no != null">item_no like CONCAT('%',#{item_no},'%') and</if>
    	<if test="item_name != null">item_name=#{item_name} and</if>
    	<if test="to_warehouse != null">to_warehouse=#{to_warehouse} and</if>
    	<if test="unit != null">unit=#{unit} and</if>
    	<if test="order_date != null">order_date=#{order_date} and</if>
    	<if test="target != null">target= like CONCAT('%',#{target},'%') and</if>
    	<if test="inst_reg_date_Date != null">inst_reg_date_Date=#{inst_reg_date_Date} and</if>
    	<if test="inst_deatline != null">inst_deatline=#{inst_deatline} and</if>
    	<if test="done_date != null">done_date=#{done_date} and</if>
    	(weight between #{min_weight} and #{max_weight}) and
    	(thickness between #{min_thickness} and #{max_thickness}) and
    	(height between #{min_height} and #{max_height}) and
    	(order_amount between #{min_order_amount} and #{max_order_amount}) and
    	(im_amount between #{min_im_amount} and #{max_im_amount}) and
    	(width between #{min_width} and #{max_width})
    </select>
    
    <insert id="insert" parameterType="LogiImportDTO">
        INSERT
        INTO Import 
        VALUES (
        	#{status},
        	#{location},
        	#{instruction_no},
        	#{product_family},
        	#{lot_no},
        	#{item_no},
        	#{item_name},
        	#{amount},
        	#{weight},
        	#{unit},
        	#{target},
        	#{width},
        	#{thickness},
        	#{height},
        	#{order_amount},
        	#{im_amount},
        	#{to_warehouse},
        	#{order_date},
        	#{inst_reg_date},
        	#{inst_deadline},
        	#{done_date}
        );
    </insert>
    
    <delete id="delete" parameterType="String">
	    delete
		from Import
		where instruction_no=#{instructionNo};
    </delete>
    
    <update id="confirm" parameterType="String">
    	UPDATE Import 
    	SET status = "입고완료" 
    	WHERE instruction_no=#{instructionNo};
    </update>
    
</mapper>
